{"ast":null,"code":"import _slicedToArray from\"C:/Users/user/Desktop/Ziv/Web/React/food-ordering-demo-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _toConsumableArray from\"C:/Users/user/Desktop/Ziv/Web/React/food-ordering-demo-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import React,{useReducer}from\"react\";import CartContext from\"./cart-context\";import{jsx as _jsx}from\"react/jsx-runtime\";var defaultCartState={items:[],totalAmount:0};var cartReducer=function cartReducer(state,action){if(action.type===\"ADD_ITEM\"){var updatedItems=_toConsumableArray(state.items);var existingItem=state.items.find(function(item){return item.id===action.item.id;});var updatedTotalAmount=state.totalAmount+action.item.price*action.item.amount;if(existingItem){existingItem.amount+=1;}else{updatedItems=state.items.concat(action.item);}return{items:updatedItems,totalAmount:updatedTotalAmount};}if(action.type===\"REMOVE_ITEM\"){var _updatedItems=_toConsumableArray(state.items);var existingItemIndex=state.items.findIndex(function(item){return item.id===action.id;});var _existingItem=state.items[existingItemIndex];var _updatedTotalAmount=state.totalAmount-_existingItem.price;if(_existingItem){if(_existingItem.amount>1){_existingItem.amount-=1;}else{_updatedItems=state.items.filter(function(item){return item.id!==action.id;});}return{items:_updatedItems,totalAmount:_updatedTotalAmount};}return defaultCartState;}};var CartProvider=function CartProvider(props){var _useReducer=useReducer(cartReducer,defaultCartState),_useReducer2=_slicedToArray(_useReducer,2),cartState=_useReducer2[0],dispatchCartAction=_useReducer2[1];var addItemToCartHandler=function addItemToCartHandler(item){dispatchCartAction({type:\"ADD_ITEM\",item:item});};var removeItemFromCartHandler=function removeItemFromCartHandler(id){dispatchCartAction({type:\"REMOVE_ITEM\",id:id});};var cartContext={items:cartState.items,totalAmount:cartState.totalAmount,addItem:addItemToCartHandler,removeItem:removeItemFromCartHandler,onClick:props.onClick,onDismiss:props.onDismiss};return/*#__PURE__*/_jsx(CartContext.Provider,{value:cartContext,children:props.children});};export default CartProvider;","map":{"version":3,"names":["React","useReducer","CartContext","defaultCartState","items","totalAmount","cartReducer","state","action","type","updatedItems","existingItem","find","item","id","updatedTotalAmount","price","amount","concat","existingItemIndex","findIndex","filter","CartProvider","props","cartState","dispatchCartAction","addItemToCartHandler","removeItemFromCartHandler","cartContext","addItem","removeItem","onClick","onDismiss","children"],"sources":["C:/Users/user/Desktop/Ziv/Web/React/food-ordering-demo-app/src/store/CartProvider.js"],"sourcesContent":["import React, { useReducer } from \"react\";\r\n\r\nimport CartContext from \"./cart-context\";\r\n\r\nconst defaultCartState = {\r\n  items: [],\r\n  totalAmount: 0,\r\n};\r\n\r\nconst cartReducer = (state, action) => {\r\n  if (action.type === \"ADD_ITEM\") {\r\n    let updatedItems = [...state.items];\r\n    const existingItem = state.items.find((item) => item.id === action.item.id);\r\n    const updatedTotalAmount =\r\n      state.totalAmount + action.item.price * action.item.amount;\r\n    if (existingItem) {\r\n      existingItem.amount += 1;\r\n    } else {\r\n      updatedItems = state.items.concat(action.item);\r\n    }\r\n    return {\r\n      items: updatedItems,\r\n      totalAmount: updatedTotalAmount,\r\n    };\r\n  }\r\n  if (action.type === \"REMOVE_ITEM\") {\r\n    let updatedItems = [...state.items];\r\n    const existingItemIndex = state.items.findIndex(\r\n      (item) => item.id === action.id\r\n    );\r\n    const existingItem = state.items[existingItemIndex];\r\n    const updatedTotalAmount = state.totalAmount - existingItem.price;\r\n    if (existingItem) {\r\n      if (existingItem.amount > 1) {\r\n        existingItem.amount -= 1;\r\n      } else {\r\n        updatedItems = state.items.filter((item) => item.id !== action.id);\r\n      }\r\n      return {\r\n        items: updatedItems,\r\n        totalAmount: updatedTotalAmount,\r\n      };\r\n    }\r\n    return defaultCartState;\r\n  }\r\n};\r\n\r\nconst CartProvider = (props) => {\r\n  const [cartState, dispatchCartAction] = useReducer(\r\n    cartReducer,\r\n    defaultCartState\r\n  );\r\n\r\n  const addItemToCartHandler = (item) => {\r\n    dispatchCartAction({ type: \"ADD_ITEM\", item: item });\r\n  };\r\n\r\n  const removeItemFromCartHandler = (id) => {\r\n    dispatchCartAction({ type: \"REMOVE_ITEM\", id: id });\r\n  };\r\n\r\n  const cartContext = {\r\n    items: cartState.items,\r\n    totalAmount: cartState.totalAmount,\r\n    addItem: addItemToCartHandler,\r\n    removeItem: removeItemFromCartHandler,\r\n    onClick: props.onClick,\r\n    onDismiss: props.onDismiss,\r\n  };\r\n\r\n  return (\r\n    <CartContext.Provider value={cartContext}>\r\n      {props.children}\r\n    </CartContext.Provider>\r\n  );\r\n};\r\n\r\nexport default CartProvider;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}